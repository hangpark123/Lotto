<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>동행복권 웹 플랫폼</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/style_clean.css?v=20260210-5">
</head>
<body>
    <div id="app">
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
        </div>

        <div id="login-page" class="page">
            <div class="login-container">
                <div class="login-card">
                    <div class="logo-section">
                        <div class="logo-badge">DH</div>
                        <h1 class="logo-text">동행복권</h1>
                        <p class="logo-subtitle">동행복권 계정으로 로그인하고 구매/조회 기능을 이용하세요.</p>
                    </div>

                    <form id="login-form" class="login-form">
                        <div class="form-group">
                            <label for="username">아이디</label>
                            <input type="text" id="username" name="username" placeholder="동행복권 아이디 입력" required autocomplete="username">
                        </div>

                        <div class="form-group">
                            <label for="password">비밀번호</label>
                            <input type="password" id="password" name="password" placeholder="비밀번호 입력" required autocomplete="current-password">
                        </div>

                        <button type="submit" class="btn btn-primary btn-large">로그인</button>
                        <div id="login-error" class="error-message hidden"></div>
                    </form>

                    <div class="login-footer">
                        <p>비공식 API 기반 서비스입니다.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="main-app" class="hidden">
            <nav class="navbar">
                <div class="navbar-brand">
                    <span class="brand-mark">DH</span>
                    <span class="navbar-title">동행복권 웹 플랫폼</span>
                </div>

                <div class="navbar-menu">
                    <a href="#" data-page="dashboard" class="nav-link active">대시보드</a>
                    <a href="#" data-page="buy" class="nav-link">로또 구매</a>
                    <a href="#" data-page="history" class="nav-link">구매 내역</a>
                    <a href="#" data-page="virtual-account" class="nav-link">가상계좌</a>
                </div>

                <div class="navbar-user">
                    <span id="username-display" class="username"></span>
                    <button id="logout-btn" class="btn btn-secondary btn-small">로그아웃</button>
                </div>
            </nav>

            <main class="main-content">
                <div id="dashboard-page" class="content-page active">
                    <div class="page-header">
                        <div class="page-heading">
                            <h2>예치금 현황</h2>
                            <p class="page-description">현재 계정의 잔액 정보를 실시간으로 확인합니다.</p>
                        </div>
                        <button id="refresh-balance-btn" class="btn btn-secondary" type="button">새로고침</button>
                    </div>
                    <div id="balance-cards" class="balance-grid"></div>
                </div>

                <div id="buy-page" class="content-page">
                    <div class="page-header">
                        <div class="page-heading">
                            <h2>로또 구매</h2>
                            <p class="page-description">수동/자동/AI 번호를 구성해 최대 5게임까지 한 번에 구매할 수 있습니다.</p>
                        </div>
                        <div id="buy-weekly-remaining" class="weekly-limit-chip">이번주 구매 가능 금액: -</div>
                    </div>

                    <div class="buy-mode-note">
                        <strong>자동번호</strong>는 완전 무작위 6개 번호를 생성합니다.
                        <strong>AI 추천</strong>은 최근 회차 흐름을 바탕으로 추천 번호를 제안합니다.
                    </div>

                    <div class="lotto-interface">
                        <section class="lotto-sidebar">
                            <div class="lotto-tab active" data-tab="manual">
                                <div class="tab-title">수동 입력</div>
                                <div class="tab-desc">번호 6개를 직접 선택합니다.</div>
                            </div>
                            <div class="lotto-tab" data-tab="auto">
                                <div class="tab-title">자동 번호</div>
                                <div class="tab-desc">무작위 번호를 자동 생성합니다.</div>
                            </div>
                            <div class="lotto-tab ai-tab" data-tab="ai">
                                <div class="tab-title">AI 추천</div>
                                <div class="tab-desc">추천 번호를 분석해서 불러옵니다.</div>
                            </div>
                        </section>

                        <section class="lotto-board-section">
                            <div class="price-display">
                                <span id="current-price">1,000원 / 1게임</span>
                            </div>

                            <div class="number-grid"></div>

                            <div class="board-actions">
                                <button id="btn-reset-board" class="btn btn-outline">선택 초기화</button>
                                <button id="btn-auto-select" class="btn btn-outline">자동 선택</button>
                                <button id="btn-add-ticket" class="btn btn-primary">번호 확정</button>
                            </div>
                        </section>

                        <section class="lotto-cart-section">
                            <div class="cart-header">
                                <h3>선택 번호 확인</h3>
                                <button id="btn-reset-all" class="btn btn-secondary btn-small">전체 삭제</button>
                            </div>

                            <div class="cart-slots">
                                <div class="cart-slot empty" data-slot="A">
                                    <span class="slot-label">A 슬롯</span>
                                    <div class="slot-numbers"></div>
                                    <div class="slot-actions">
                                        <button class="btn-icon delete-slot" type="button">삭제</button>
                                    </div>
                                </div>
                                <div class="cart-slot empty" data-slot="B">
                                    <span class="slot-label">B 슬롯</span>
                                    <div class="slot-numbers"></div>
                                    <div class="slot-actions">
                                        <button class="btn-icon delete-slot" type="button">삭제</button>
                                    </div>
                                </div>
                                <div class="cart-slot empty" data-slot="C">
                                    <span class="slot-label">C 슬롯</span>
                                    <div class="slot-numbers"></div>
                                    <div class="slot-actions">
                                        <button class="btn-icon delete-slot" type="button">삭제</button>
                                    </div>
                                </div>
                                <div class="cart-slot empty" data-slot="D">
                                    <span class="slot-label">D 슬롯</span>
                                    <div class="slot-numbers"></div>
                                    <div class="slot-actions">
                                        <button class="btn-icon delete-slot" type="button">삭제</button>
                                    </div>
                                </div>
                                <div class="cart-slot empty" data-slot="E">
                                    <span class="slot-label">E 슬롯</span>
                                    <div class="slot-numbers"></div>
                                    <div class="slot-actions">
                                        <button class="btn-icon delete-slot" type="button">삭제</button>
                                    </div>
                                </div>
                            </div>

                            <div class="cart-footer">
                                <div class="cart-total">
                                    <span>결제금액</span>
                                    <span id="total-price" class="total-amount">0원</span>
                                </div>
                                <button id="btn-buy-final" class="btn btn-primary btn-block" disabled>구매하기</button>
                            </div>
                        </section>
                    </div>

                    <div class="buy-extra-grid">
                        <section class="buy-extra-card">
                            <h3>직전 회차 번호</h3>
                            <div class="draw-nav">
                                <button id="btn-draw-prev" class="btn btn-secondary btn-small" type="button">이전 회차</button>
                                <div id="draw-current-label" class="draw-current-label">-</div>
                                <button id="btn-draw-next" class="btn btn-secondary btn-small" type="button">다음 회차</button>
                            </div>
                            <div id="last-draw-panel" class="last-draw-panel">
                                <p class="saved-number-empty">직전 회차 번호를 불러오는 중입니다.</p>
                            </div>
                        </section>

                        <section class="buy-extra-card">
                            <div class="saved-number-header">
                                <h3>나의 지정번호</h3>
                                <div class="saved-number-form">
                                    <input type="text" id="my-number-name" maxlength="30" placeholder="번호 이름 (선택)">
                                    <button id="btn-save-my-number" class="btn btn-secondary btn-small" type="button">현재 선택번호 저장</button>
                                </div>
                            </div>
                            <p class="saved-number-help">수동 입력에서 번호 6개를 선택한 뒤 저장하면 슬롯에 바로 담아 구매할 수 있습니다.</p>
                            <div id="my-lotto-number-list" class="saved-number-list">
                                <p class="saved-number-empty">저장된 지정번호가 없습니다.</p>
                            </div>
                        </section>
                    </div>
                </div>

                <div id="history-page" class="content-page">
                    <div class="page-header">
                        <div class="page-heading">
                            <h2>구매 내역</h2>
                            <p class="page-description">최대 1개월 단위로 조회됩니다. 시작일을 선택하면 종료일이 자동 조정됩니다.</p>
                        </div>
                        <button id="refresh-history-btn" class="btn btn-secondary" type="button">새로고침</button>
                    </div>

                    <p class="history-note">
                        주의: 구매내역 조회는 최대 1개월 범위만 가능합니다. 시작일을 선택하면 종료일이 자동으로 1개월 뒤(오늘 이하)로 설정됩니다.
                    </p>

                    <div class="history-filters">
                        <div class="form-group">
                            <label for="start-date">시작일</label>
                            <input type="date" id="start-date" class="date-input">
                        </div>
                        <div class="form-group">
                            <label for="end-date">종료일</label>
                            <input type="date" id="end-date" class="date-input">
                        </div>
                        <button id="filter-history-btn" class="btn btn-primary">조회</button>
                    </div>

                    <div id="history-table-container"></div>
                </div>

                <div id="virtual-account-page" class="content-page">
                    <div class="page-header">
                        <div class="page-heading">
                            <h2>개인별 가상계좌</h2>
                            <p class="page-description">충전 금액을 선택해 계좌를 발급받고, 표시된 계좌로 직접 입금하세요.</p>
                        </div>
                        <button id="refresh-virtual-account-btn" class="btn btn-secondary" type="button">조회</button>
                    </div>

                    <div class="virtual-account-grid">
                        <section class="virtual-account-card">
                            <h3>가상계좌 발급</h3>
                            <p class="virtual-account-help">금액을 선택하고 가상계좌 발급 버튼을 눌러 충전을 진행하세요.</p>
                            <div class="virtual-account-form">
                                <label for="virtual-account-amount">입금 신청 금액</label>
                                <select id="virtual-account-amount">
                                    <option value="5000">5,000원</option>
                                    <option value="10000">10,000원</option>
                                    <option value="20000">20,000원</option>
                                    <option value="30000">30,000원</option>
                                    <option value="50000" selected>50,000원</option>
                                    <option value="100000">100,000원</option>
                                    <option value="200000">200,000원</option>
                                    <option value="300000">300,000원</option>
                                    <option value="500000">500,000원</option>
                                    <option value="700000">700,000원</option>
                                    <option value="1000000">1,000,000원</option>
                                </select>
                                <button id="assign-virtual-account-btn" class="btn btn-primary" type="button">가상계좌 발급</button>
                            </div>
                        </section>

                        <section class="virtual-account-card">
                            <h3>현재 사용자 계좌 정보</h3>
                            <div id="virtual-account-result">
                                <p class="virtual-account-empty">아직 발급된 가상계좌가 없습니다.</p>
                            </div>
                        </section>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="/assets/app.js?v=20260210-5"></script>
</body>
</html>
